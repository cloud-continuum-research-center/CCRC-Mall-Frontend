{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7afa3188\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"review\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"상품 리뷰\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"1\\\" data-v-7afa3188>1 Star</option><option value=\\\"2\\\" data-v-7afa3188>2 Stars</option><option value=\\\"3\\\" data-v-7afa3188>3 Stars</option><option value=\\\"4\\\" data-v-7afa3188>4 Stars</option><option value=\\\"5\\\" data-v-7afa3188>5 Stars</option>\", 5);\nconst _hoisted_8 = [_hoisted_3];\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"리뷰 등록하기\", -1 /* HOISTED */));\nconst _hoisted_10 = {\n  key: 0,\n  class: \"review-list\"\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"리뷰 목록\", -1 /* HOISTED */));\nconst _hoisted_12 = {\n  class: \"list-group\"\n};\nconst _hoisted_13 = {\n  class: \"d-flex justify-content-between align-items-center\"\n};\nconst _hoisted_14 = {\n  class: \"star-rating\"\n};\nconst _hoisted_15 = {\n  class: \"review-content\"\n};\nconst _hoisted_16 = {\n  key: 1\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"등록된 리뷰가 없습니다.\", -1 /* HOISTED */));\nconst _hoisted_18 = [_hoisted_17];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" 리뷰 작성 폼 \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.submitReview && $setup.submitReview(...args), [\"prevent\"])),\n    class: \"review-form\"\n  }, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.state.reviewData.content = $event),\n    class: \"form-control\",\n    placeholder: \"리뷰 작성란\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.state.reviewData.content]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.state.reviewData.star = $event),\n    class: \"form-select\"\n  }, [..._hoisted_8], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.state.reviewData.star]]), _hoisted_9], 32 /* NEED_HYDRATION */), _createCommentVNode(\" 리뷰 목록 \"), $setup.state.reviews && $setup.state.reviews.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_hoisted_11, _createElementVNode(\"ul\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.state.reviews, (review, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      class: \"list-group-item\"\n    }, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", null, [_createElementVNode(\"span\", _hoisted_14, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, i => {\n      return _createElementVNode(\"span\", {\n        key: i,\n        class: _normalizeClass({\n          'fas fa-star': i <= review.star,\n          'far fa-star': i > review.star\n        })\n      }, null, 2 /* CLASS */);\n    }), 64 /* STABLE_FRAGMENT */))]), _createTextVNode(\" \" + _toDisplayString(review.star) + \" Stars \", 1 /* TEXT */)]), _createCommentVNode(\" 줄 바꿈하여 리뷰 내용 표시 \"), _createElementVNode(\"div\", _hoisted_15, _toDisplayString(review.content), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [..._hoisted_18]))]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createStaticVNode","_hoisted_3","type","key","_hoisted_17","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","onSubmit","_cache","_withModifiers","args","$setup","submitReview","$event","state","reviewData","content","placeholder","star","_hoisted_8","_hoisted_9","reviews","length","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment","_renderList","review","index","_hoisted_13","_hoisted_14","i","_normalizeClass","_createTextVNode","_toDisplayString","_hoisted_15","_hoisted_16","_hoisted_18"],"sources":["C:\\Users\\boo\\icns\\shop\\front-end\\src\\components\\Review.vue"],"sourcesContent":["<template>\r\n  <div class=\"review\">\r\n    <h2>상품 리뷰</h2>\r\n\r\n    <!-- 리뷰 작성 폼 -->\r\n    <form @submit.prevent=\"submitReview\" class=\"review-form\">\r\n      <textarea v-model=\"state.reviewData.content\" class=\"form-control\" placeholder=\"리뷰 작성란\"></textarea>\r\n      <select v-model=\"state.reviewData.star\" class=\"form-select\">\r\n        <option value=\"1\">1 Star</option>\r\n        <option value=\"2\">2 Stars</option>\r\n        <option value=\"3\">3 Stars</option>\r\n        <option value=\"4\">4 Stars</option>\r\n        <option value=\"5\">5 Stars</option>\r\n      </select>\r\n      <button type=\"submit\" class=\"btn btn-primary\">리뷰 등록하기</button>\r\n    </form>\r\n\r\n    <!-- 리뷰 목록 -->\r\n    <div v-if=\"state.reviews && state.reviews.length > 0\" class=\"review-list\">\r\n      <h3>리뷰 목록</h3>\r\n      <ul class=\"list-group\">\r\n        <li v-for=\"(review, index) in state.reviews\" :key=\"index\" class=\"list-group-item\">\r\n          <div class=\"d-flex justify-content-between align-items-center\">\r\n\r\n            <div>\r\n              <span class=\"star-rating\">\r\n                <span v-for=\"i in 5\" :key=\"i\"\r\n                  :class=\"{ 'fas fa-star': i <= review.star, 'far fa-star': i > review.star }\"></span>\r\n              </span>\r\n              {{ review.star }} Stars\r\n            </div>\r\n            <!-- 줄 바꿈하여 리뷰 내용 표시 -->\r\n            <div class=\"review-content\">{{ review.content }}</div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div v-else>\r\n      <p>등록된 리뷰가 없습니다.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { reactive } from \"vue\";\r\n\r\nexport default {\r\n  name: \"Review\",\r\n  props: {\r\n    productId: {}\r\n  },\r\n  setup(props) {\r\n    const state = reactive({\r\n      reviews: [],\r\n      reviewData: {\r\n        content: \"\",\r\n        star: 0,\r\n        user_id: 1,\r\n        item_id: props.productId,\r\n      }\r\n    });\r\n\r\n    const submitReview = () => {\r\n      const productId = props.productId;\r\n      state.reviewData.item_id = productId;\r\n      axios.post(`/api/items/${productId}/reviews/`, state.reviewData).then((response) => {\r\n        console.log(\"리뷰가 성공적으로 등록되었습니다:\", response.data);\r\n        window.alert('리뷰가 성공적으로 등록되었습니다.');\r\n        fetchReviews();\r\n      }).catch((error) => {\r\n        console.error(\"리뷰 등록에 실패했습니다:\", error);\r\n      });\r\n    };\r\n\r\n    const fetchReviews = () => {\r\n      const productId = props.productId;\r\n      axios.get(`/api/items/${productId}/reviews/`).then(response => {\r\n        state.reviews = response.data;\r\n      });\r\n    };\r\n\r\n    return { state, submitReview, fetchReviews };\r\n  },\r\n  watch: {\r\n    productId() {\r\n      if (this.productId) {\r\n        this.fetchReviews();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.review {\r\n  margin-top: 50px;\r\n  margin-bottom: 300px;\r\n}\r\n\r\n.review h2,\r\nh3 {\r\n  margin-bottom: 20px;\r\n  color: black;\r\n  font-size: 24px;\r\n  font-family: Poppins;\r\n  font-weight: 600;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.review-form {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.review-list {\r\n  margin-top: 20px;\r\n}\r\n\r\n.review-list .list-group-item {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.review-content {\r\n  flex-grow: 1;\r\n  margin-left: 10px;\r\n  font-family: Poppins;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAQ;gEACjBC,mBAAA,CAAc,YAAV,OAAK;gCAFbC,kBAAA;oBAQQC,UAAiC,C;gEAMnCF,mBAAA,CAA8D;EAAtDG,IAAI,EAAC,QAAQ;EAACJ,KAAK,EAAC;GAAkB,SAAO;;EAd3DK,GAAA;EAkB0DL,KAAK,EAAC;;iEAC1DC,mBAAA,CAAc,YAAV,OAAK;;EACLD,KAAK,EAAC;AAAY;;EAEbA,KAAK,EAAC;AAAmD;;EAGpDA,KAAK,EAAC;AAAa;;EAOtBA,KAAK,EAAC;AAAgB;;EAhCvCK,GAAA;AAAA;iEAsCMJ,mBAAA,CAAoB,WAAjB,eAAa;qBAAhBK,WAAoB,C;;uBArCxBC,mBAAA,CAuCM,OAvCNC,UAuCM,GAtCJC,UAAc,EAEdC,mBAAA,aAAgB,EAChBT,mBAAA,CAUO;IAVAU,QAAM,EAAAC,MAAA,QAAAA,MAAA,MALjBC,cAAA,KAAAC,IAAA,KAK2BC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;IAAEd,KAAK,EAAC;sBACzCC,mBAAA,CAAkG;IANxG,uBAAAW,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAMyBF,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACC,OAAO,GAAAH,MAAA;IAAEjB,KAAK,EAAC,cAAc;IAACqB,WAAW,EAAC;iDAA3DN,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACC,OAAO,E,mBAC3CnB,mBAAA,CAMS;IAbf,uBAAAW,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAOuBF,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACG,IAAI,GAAAL,MAAA;IAAEjB,KAAK,EAAC;KAPpD,IAAAuB,UAAA,2B,gBAOuBR,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACG,IAAI,E,GAOtCE,UAA8D,C,4BAGhEd,mBAAA,WAAc,EACHK,MAAA,CAAAG,KAAK,CAACO,OAAO,IAAIV,MAAA,CAAAG,KAAK,CAACO,OAAO,CAACC,MAAM,Q,cAAhDnB,mBAAA,CAkBM,OAlBNoB,WAkBM,GAjBJC,WAAc,EACd3B,mBAAA,CAeK,MAfL4B,WAeK,I,kBAdHtB,mBAAA,CAaKuB,SAAA,QAlCbC,WAAA,CAqBsChB,MAAA,CAAAG,KAAK,CAACO,OAAO,EArBnD,CAqBoBO,MAAM,EAAEC,KAAK;yBAAzB1B,mBAAA,CAaK;MAbyCF,GAAG,EAAE4B,KAAK;MAAEjC,KAAK,EAAC;QAC9DC,mBAAA,CAWM,OAXNiC,WAWM,GATJjC,mBAAA,CAMM,cALJA,mBAAA,CAGO,QAHPkC,WAGO,I,cAFL5B,mBAAA,CACsFuB,SAAA,QA3BtGC,WAAA,CA0BkC,CAAC,EAANK,CAAC;aAAdnC,mBAAA,CACsF;QADhEI,GAAG,EAAE+B,CAAC;QACzBpC,KAAK,EA3BxBqC,eAAA;UAAA,eA2B2CD,CAAC,IAAIJ,MAAM,CAACV,IAAI;UAAA,eAAiBc,CAAC,GAAGJ,MAAM,CAACV;QAAI;;sCA3B3FgB,gBAAA,CA4BqB,GACP,GAAAC,gBAAA,CAAGP,MAAM,CAACV,IAAI,IAAG,SACnB,gB,GACAZ,mBAAA,qBAAwB,EACxBT,mBAAA,CAAsD,OAAtDuC,WAAsD,EAAAD,gBAAA,CAAvBP,MAAM,CAACZ,OAAO,iB;uDAKrDb,mBAAA,CAEM,OAvCVkC,WAAA,MAAAC,WAAA,I"},"metadata":{},"sourceType":"module","externalDependencies":[]}