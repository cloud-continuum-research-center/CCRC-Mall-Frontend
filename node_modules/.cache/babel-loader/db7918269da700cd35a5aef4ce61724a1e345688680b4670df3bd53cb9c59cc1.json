{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"1\\\">1 Star</option><option value=\\\"2\\\">2 Stars</option><option value=\\\"3\\\">3 Stars</option><option value=\\\"4\\\">4 Stars</option><option value=\\\"5\\\">5 Stars</option>\", 5);\nconst _hoisted_6 = [_hoisted_1];\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"리뷰 등록하기\", -1 /* HOISTED */);\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"리뷰 목록\", -1 /* HOISTED */);\nconst _hoisted_10 = {\n  key: 1\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"p\", null, \"등록된 리뷰가 없습니다.\", -1 /* HOISTED */);\nconst _hoisted_12 = [_hoisted_11];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"h2\", null, \"리뷰\" + _toDisplayString($props.productId), 1 /* TEXT */), _createCommentVNode(\" 리뷰 작성 폼 \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.submitReview && $setup.submitReview(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.state.reviewData.content = $event),\n    placeholder: \"리뷰 작성란\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.state.reviewData.content]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.state.reviewData.star = $event)\n  }, [..._hoisted_6], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.state.reviewData.star]]), _hoisted_7], 32 /* NEED_HYDRATION */), _createCommentVNode(\" 리뷰 목록 \"), $setup.state.review && $setup.state.reviews.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.state.reviews, (review, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, [_createElementVNode(\"div\", null, \"별점: \" + _toDisplayString(review.star) + \" Stars\", 1 /* TEXT */), _createElementVNode(\"div\", null, \"내용: \" + _toDisplayString(review.content), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [..._hoisted_12]))]);\n}","map":{"version":3,"names":["_createStaticVNode","_hoisted_1","_createElementVNode","type","key","_hoisted_11","_createElementBlock","_toDisplayString","$props","productId","_createCommentVNode","onSubmit","_cache","_withModifiers","args","$setup","submitReview","$event","state","reviewData","content","placeholder","star","_hoisted_6","_hoisted_7","review","reviews","length","_hoisted_8","_hoisted_9","_Fragment","_renderList","index","_hoisted_10","_hoisted_12"],"sources":["C:\\Users\\boo\\icns\\shop\\front-end\\src\\components\\Review.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>리뷰{{ productId }}</h2>\r\n\r\n    <!-- 리뷰 작성 폼 -->\r\n    <form @submit.prevent=\"submitReview\">\r\n      <textarea v-model=\"state.reviewData.content\" placeholder=\"리뷰 작성란\"></textarea>\r\n      <select v-model=\"state.reviewData.star\">\r\n        <option value=\"1\">1 Star</option>\r\n        <option value=\"2\">2 Stars</option>\r\n        <option value=\"3\">3 Stars</option>\r\n        <option value=\"4\">4 Stars</option>\r\n        <option value=\"5\">5 Stars</option>\r\n      </select>\r\n      <button type=\"submit\">리뷰 등록하기</button>\r\n    </form>\r\n\r\n    <!-- 리뷰 목록 -->\r\n    <div v-if=\"state.review && state.reviews.length > 0\">\r\n      <h3>리뷰 목록</h3>\r\n      <ul>\r\n        <li v-for=\"(review, index) in state.reviews\" :key=\"index\">\r\n          <div>별점: {{ review.star }} Stars</div>\r\n          <div>내용: {{ review.content }}</div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div v-else>\r\n      <p>등록된 리뷰가 없습니다.</p>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { reactive } from \"vue\";\r\n\r\nexport default {\r\n  name: \"Review\",\r\n  props: {\r\n    productId: {\r\n    }\r\n  },\r\n  setup(props) {\r\n    const state = reactive({\r\n      reviews: [],\r\n      reviewData: {\r\n        content: \"\",\r\n        star: 0,\r\n        user_id: 1,\r\n        item_id: props.productId,\r\n      }\r\n    });\r\n\r\n    const submitReview = () => {\r\n      const productId = props.productId;\r\n      console.log(state);\r\n      axios.post(`/api/items/${productId}/reviews/`, state.reviewData).then((response) => {\r\n        console.log(\"리뷰가 성공적으로 등록되었습니다:\", response.data);\r\n        window.alert('리뷰가 성공적으로 등록되었습니다.');\r\n        fetchReviews();\r\n      }).catch((error) => {\r\n        console.error(\"리뷰 등록에 실패했습니다:\", error);\r\n      });\r\n    }\r\n\r\n    const fetchReviews = () => {\r\n      const productId = props.productId;\r\n      console.log(\"Get\", productId);\r\n      axios.get(`/api/items/${productId}/reviews/`).then(response => {\r\n        state.reviews = response.data;\r\n        console.log(state.reviews);\r\n      });\r\n    }\r\n\r\n\r\n    return { state, submitReview, fetchReviews };\r\n  },\r\n  watch: {\r\n    productId() {\r\n      if (this.productId) {\r\n        this.fetchReviews();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>"],"mappings":";gCAAAA,kBAAA;oBAQQC,UAAiC,C;gCAMnCC,mBAAA,CAAsC;EAA9BC,IAAI,EAAC;AAAQ,GAAC,SAAO;;EAdnCC,GAAA;AAAA;gCAmBMF,mBAAA,CAAc,YAAV,OAAK;;EAnBfE,GAAA;AAAA;iCA4BMF,mBAAA,CAAoB,WAAjB,eAAa;qBAAhBG,WAAoB,C;;uBA3BxBC,mBAAA,CA+BM,cA9BJJ,mBAAA,CAA0B,YAAtB,IAAE,GAAAK,gBAAA,CAAGC,MAAA,CAAAC,SAAS,kBAElBC,mBAAA,aAAgB,EAChBR,mBAAA,CAUO;IAVAS,QAAM,EAAAC,MAAA,QAAAA,MAAA,MALjBC,cAAA,KAAAC,IAAA,KAK2BC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;sBACjCZ,mBAAA,CAA6E;IANnF,uBAAAU,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAMyBF,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACC,OAAO,GAAAH,MAAA;IAAEI,WAAW,EAAC;iDAAtCN,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACC,OAAO,E,mBAC3ClB,mBAAA,CAMS;IAbf,uBAAAU,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAOuBF,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACG,IAAI,GAAAL,MAAA;KAP5C,IAAAM,UAAA,2B,gBAOuBR,MAAA,CAAAG,KAAK,CAACC,UAAU,CAACG,IAAI,E,GAOtCE,UAAsC,C,4BAGxCd,mBAAA,WAAc,EACHK,MAAA,CAAAG,KAAK,CAACO,MAAM,IAAIV,MAAA,CAAAG,KAAK,CAACQ,OAAO,CAACC,MAAM,Q,cAA/CrB,mBAAA,CAQM,OA1BVsB,UAAA,GAmBMC,UAAc,EACd3B,mBAAA,CAKK,c,kBAJHI,mBAAA,CAGKwB,SAAA,QAxBbC,WAAA,CAqBsChB,MAAA,CAAAG,KAAK,CAACQ,OAAO,EArBnD,CAqBoBD,MAAM,EAAEO,KAAK;yBAAzB1B,mBAAA,CAGK;MAHyCF,GAAG,EAAE4B;IAAK,IACtD9B,mBAAA,CAAsC,aAAjC,MAAI,GAAAK,gBAAA,CAAGkB,MAAM,CAACH,IAAI,IAAG,QAAM,iBAChCpB,mBAAA,CAAmC,aAA9B,MAAI,GAAAK,gBAAA,CAAGkB,MAAM,CAACL,OAAO,iB;uDAIhCd,mBAAA,CAEM,OA7BV2B,WAAA,MAAAC,WAAA,I"},"metadata":{},"sourceType":"module","externalDependencies":[]}